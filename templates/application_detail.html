{% extends 'base.html' %}
{% block title %}Application - {{ app_item.name }}{% endblock %}

{% block content %}
<section class="section">
  <div class="container">
    <a href="{{ url_for('applications') }}" class="btn-flat"><i class="material-icons left">arrow_back</i>Back to Applications</a>

    <div class="card" style="margin-top:12px;">
      <div class="card-content">
        <div style="display:flex; gap:16px; align-items:center; flex-wrap:wrap;">
          <img src="{{ app_item.logo }}" onerror="this.src='https://via.placeholder.com/72'" alt="logo" style="width:72px;height:72px;border-radius:8px;">
          <div style="flex:1 1 auto;">
            <h5 style="margin:0;">{{ app_item.name }}</h5>
            <div class="grey-text">{{ app_item.type }} â€¢ Deadline: <strong>{{ app_item.deadline }}</strong></div>
          </div>
          <div style="display:flex; gap:8px;">
            <a class="btn-flat"><i class="material-icons left">edit</i>Edit</a>
            <a class="btn-flat red-text"><i class="material-icons left">delete</i>Delete</a>
            <select class="browser-default">
              <option {% if app_item.status=='Draft' %}selected{% endif %}>Draft</option>
              <option {% if app_item.status=='In Progress' %}selected{% endif %}>In Progress</option>
              <option {% if app_item.status=='Submitted' %}selected{% endif %}>Submitted</option>
              <option {% if app_item.status=='Accepted' %}selected{% endif %}>Accepted</option>
              <option {% if app_item.status=='Rejected' %}selected{% endif %}>Rejected</option>
              <option {% if app_item.status=='Waitlisted' %}selected{% endif %}>Waitlisted</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="row">
      <div class="col s12">
        <ul class="tabs">
          <li class="tab"><a class="active" href="#tab-overview">Overview</a></li>
          <li class="tab"><a href="#tab-docs">Documents</a></li>
          <li class="tab"><a href="#tab-timeline">Timeline</a></li>
          <li class="tab"><a href="#tab-checklist">Checklist</a></li>
        </ul>
      </div>
      <div id="tab-overview" class="col s12">
        <div class="card"><div class="card-content">
          <span class="card-title">Key Dates & Notes</span>
          <p>Overall Progress</p>
          <div class="progress"><div class="determinate" style="width: {{ app_item.progress }}%"></div></div>
          <div class="input-field">
            <textarea id="note" class="materialize-textarea" placeholder="Add a personal note..."></textarea>
            <label for="note">Notes</label>
          </div>
          <a class="btn blue">Add Note</a>
        </div></div>
      </div>
      <div id="tab-docs" class="col s12">
        <div class="card"><div class="card-content">
          <span class="card-title">Documents</span>
          <ul class="collection">
            <li class="collection-item">Transcripts <span class="secondary-content"><a class="btn-flat">Upload</a></span></li>
            <li class="collection-item">Test Scores <span class="secondary-content"><a class="btn-flat">Upload</a></span></li>
            <li class="collection-item">Essays/Personal Statement <span class="secondary-content"><a class="btn-flat">Upload</a></span></li>
            <li class="collection-item">Letters of Recommendation <span class="secondary-content"><a class="btn-flat">Upload</a></span></li>
          </ul>
        </div></div>
      </div>
      <div id="tab-timeline" class="col s12">
        <div class="card"><div class="card-content">
          <span class="card-title">Milestones</span>
          <ul class="timeline">
            <li class="timeline-item">
              <div class="timeline-icon"><i class="material-icons">emoji_objects</i></div>
              <div class="timeline-content">Planning</div>
            </li>
            <li class="timeline-item">
              <div class="timeline-icon"><i class="material-icons">folder</i></div>
              <div class="timeline-content">Gathering Documents</div>
            </li>
            <li class="timeline-item">
              <div class="timeline-icon"><i class="material-icons">edit</i></div>
              <div class="timeline-content">Writing Essays</div>
            </li>
          </ul>
        </div></div>
      </div>
      <div id="tab-checklist" class="col s12">
        <div class="card"><div class="card-content">
          <span class="card-title">Checklist</span>
          <p><label><input type="checkbox"/><span>Finalize essay draft</span></label></p>
          <p><label><input type="checkbox"/><span>Request recommendations</span></label></p>
          <p><label><input type="checkbox" checked/><span>Pay application fee</span></label></p>
        </div></div>
      </div>
    </div>

    <div style="display:flex; gap:8px;">
      <a class="btn"><i class="material-icons left">share</i>Share Application</a>
      <a class="btn-flat">Export</a>
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function(){
    M.Tabs.init(document.querySelectorAll('.tabs'));
  });
</script>
{% endblock %}
